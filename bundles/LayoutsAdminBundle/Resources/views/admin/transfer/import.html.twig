{% extends nglayouts_admin.pageLayoutTemplate %}

{% form_theme form '@NetgenLayoutsAdmin/form/theme/nglayouts.html.twig' %}

{% trans_default_domain 'nglayouts_admin' %}

{% block title %}
    {{ 'transfer.import.title'|trans }} - {{ 'pagelayout.title'|trans }}
{% endblock %}

{% block content %}
    {{ form_start(form) }}
        {{ form_row(form.file) }}
        {{ form_row(form.import_mode) }}

        <div class="form-actions">
            <button type="submit" class="nl-btn nl-btn-primary">{{ 'import.button.upload'|trans({}, 'nglayouts_forms') }}</button>
        </div>
    {{ form_end(form) }}

    {% if results is not empty %}
        <div class="results">
            {% if error is defined %}
                <div class="error">
                    <p>{{ error.message }}</p>
                </div>
            {% endif %}

            {% for result in results %}
                <div class="result">
                    {% if result.entity is defined %}
                        <div class="result-success">
                            <p>
                                {{ 'transfer.import.result.success'|trans({
                                    '%entityType%': result.entityType,
                                    '%index%': loop.index,
                                    '%uuid%': result.entity.id.toString
                                }) }}
                            </p>
                        </div>
                    {% elseif result.error is defined %}
                        <div class="result-danger">
                            <p>
                                {{ 'transfer.import.result.error'|trans({
                                    '%entityType%': result.entityType,
                                    '%index%': loop.index,
                                    '%uuid%': result.entityId.toString
                                }) }}
                            </p>

                            <p>{{ result.error.message }}</p>
                        </div>
                    {% else %}
                        <div class="result-warning">
                            <p>
                                {{ 'transfer.import.result.skipped'|trans({
                                    '%entityType%': result.entityType,
                                    '%index%': loop.index,
                                    '%uuid%': result.entityId.toString
                                }) }}
                            </p>
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}

services:
    netgen_layouts.controller.base:
        class: Netgen\Bundle\LayoutsBundle\Controller\AbstractController
        abstract: true
        calls:
            - [setContainer, ["@service_container"]]

    # Frontend controllers

    netgen_layouts.controller.block.view_ajax_block:
        class: Netgen\Bundle\LayoutsBundle\Controller\Block\ViewAjaxBlock
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.error.handler"

    # API controllers

    ## Config controllers

    netgen_layouts.controller.api.config.load_config:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Config\LoadConfig
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.configuration"
            - "@security.csrf.token_manager"
            - "%netgen_layouts.api.csrf_token_id%"

    netgen_layouts.controller.api.config.load_block_types:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Config\LoadBlockTypes
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.block.registry.block_type"
            - "@netgen_layouts.block.registry.block_type_group"

    netgen_layouts.controller.api.config.load_layout_types:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Config\LoadLayoutTypes
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.layout.registry.layout_type"

    ## Layout controllers

    netgen_layouts.controller.api.layout.load_shared_layouts:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\LoadSharedLayouts
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"

    netgen_layouts.controller.api.layout.load:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\Load
        public: true
        parent: netgen_layouts.controller.base

    netgen_layouts.controller.api.layout.load_layout_blocks:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\LoadLayoutBlocks
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.block"

    netgen_layouts.controller.api.layout.load_zone_blocks:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\LoadZoneBlocks
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"
            - "@netgen_layouts.api.service.block"

    netgen_layouts.controller.api.layout.link_zone:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\LinkZone
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.layout.unlink_zone:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\UnlinkZone
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"

    netgen_layouts.controller.api.layout.create:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\Create
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"
            - "@netgen_layouts.layout.registry.layout_type"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.layout.copy:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\Copy
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.layout.change_type:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\ChangeType
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"
            - "@netgen_layouts.layout.registry.layout_type"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.layout.create_draft:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\CreateDraft
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"

    netgen_layouts.controller.api.layout.discard_draft:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\DiscardDraft
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"

    netgen_layouts.controller.api.layout.publish_draft:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\PublishDraft
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"
            - "@netgen_layouts.http_cache.invalidator"
            - "@netgen_layouts.configuration"

    netgen_layouts.controller.api.layout.restore_from_archive:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\RestoreFromArchive
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"

    netgen_layouts.controller.api.layout.delete:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Layout\Delete
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.layout"

    ## Block controllers

    netgen_layouts.controller.api.block.create_struct_builder:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Block\Utils\CreateStructBuilder
        arguments:
            - "@netgen_layouts.api.service.block"

    netgen_layouts.controller.api.block.load:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Block\Load
        public: true
        parent: netgen_layouts.controller.base

    netgen_layouts.controller.api.block.create:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Block\Create
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.block"
            - "@netgen_layouts.controller.api.block.create_struct_builder"
            - "@netgen_layouts.block.registry.block_type"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.block.create_in_zone:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Block\CreateInZone
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.block"
            - "@netgen_layouts.api.service.layout"
            - "@netgen_layouts.controller.api.block.create_struct_builder"
            - "@netgen_layouts.block.registry.block_type"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.block.copy:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Block\Copy
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.block"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.block.copy_to_zone:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Block\CopyToZone
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.block"
            - "@netgen_layouts.api.service.layout"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.block.move:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Block\Move
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.block"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.block.move_to_zone:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Block\MoveToZone
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.block"
            - "@netgen_layouts.api.service.layout"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.block.restore:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Block\Restore
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.block"

    netgen_layouts.controller.api.block.delete:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Block\Delete
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.block"

    ## Block collection controllers

    netgen_layouts.controller.api.block_collection.add_items:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\BlockCollection\AddItems
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.collection"
            - "@netgen_layouts.collection.registry.item_definition"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.block_collection.change_collection_type:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\BlockCollection\ChangeCollectionType
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.collection"
            - "@netgen_layouts.collection.registry.query_type"
        calls:
            - [setValidator, ["@validator"]]


    netgen_layouts.controller.api.block_collection.load_collection_result:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\BlockCollection\LoadCollectionResult
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.collection.result.pagerfanta.factory"

    ## Collection controllers

    netgen_layouts.controller.api.collection.load_collection:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Collection\LoadCollection
        public: true
        parent: netgen_layouts.controller.base

    netgen_layouts.controller.api.collection.load_items:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Collection\LoadItems
        public: true
        parent: netgen_layouts.controller.base

    netgen_layouts.controller.api.collection.load_item:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Collection\LoadItem
        public: true
        parent: netgen_layouts.controller.base

    netgen_layouts.controller.api.collection.move_item:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Collection\MoveItem
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.collection"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.collection.delete_item:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Collection\DeleteItem
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.collection"

    netgen_layouts.controller.api.collection.delete_items:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Collection\DeleteItems
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.collection"

    netgen_layouts.controller.api.collection.create_slot:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Collection\CreateSlot
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.collection"
        calls:
            - [setValidator, ["@validator"]]

    netgen_layouts.controller.api.collection.delete_slot:
        class: Netgen\Bundle\LayoutsBundle\Controller\API\Collection\DeleteSlot
        public: true
        parent: netgen_layouts.controller.base
        arguments:
            - "@netgen_layouts.api.service.collection"
